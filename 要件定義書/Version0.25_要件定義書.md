# Version 0.25 要件定義書

## 1. 概要

### 1-1. バージョン目標

```
目標：小頭ループの骨格成立（評定→割り振り→結果）
プレイ時間：4〜6時間
前提：Version 0.15（または Version 0.1 完了後）
```

### 1-2. 主要追加機能

| 機能 | 優先度 | 概要 |
|------|--------|------|
| 小頭の任務（期限あり） | 高 | 上位役職から受ける「8ターン期限」の任務を提示し、進捗を管理する |
| 小頭評定（節目の強化） | 高 | 評定で目標提示・進捗確認・割り振り・方針修正を行う |
| 委任（割り振り） | 高 | 部下にサブタスクを割り振り、ターン経過で結果が返る |
| 進捗/結果フィードバック | 高 | 進捗の可視化（%/段階）と、結果ログ（成功/失敗/損耗）を出す |
| 家臣団の最小要素 | 中 | 配下に「名前」「簡単な特性」「状態（疲労/負傷など）」を持たせる |
| 経験値/成長の接続 | 中 | 任務遂行・委任結果で経験を得て、能力が伸びる（功績とは分離） |

---

## 2. 役職範囲

### 2-1. 対象役職

```
小頭
```

### 2-2. 役職の責務（v0.25で成立させる範囲）

```
- 上位役職から「期限付き任務」を受け、期限内に達成する
- 自分の行動（徒士/馬上衆相当の公務）で進捗を進める
- 配下に仕事を割り振り（委任）、結果を回収して計画を修正する
```

---

## 3. 小頭ループ

### 3-1. 基本概念

```
【目的】
- v0.1の「月次評定」を、単なる節目ではなく「計画と修正の場」にする
- 徒士/馬上衆の行動を、中期目標（任務達成）に接続する

【任務の形】
- 上位役職から「8ターン期限の任務」を受領する
- 期限内に達成できれば成功
- 期限内に未達なら失敗
```

### 3-2. ターン/評定の扱い

```
- 1週=前半・後半の2ターン
- 8ターン=4週（1ヶ月）
- 評定は月次の節目として継続

【小頭評定（v0.25の追加）】
- 評定タイミングで「目標/進捗/割り振り/方針」を扱う
- 進捗の見える化（%または段階）を必須とする

【評定タイミング（案）】
- 任務開始時（ターン1）
- 中間確認（ターン5）
- 最終（ターン8終了時）
※上記はv0.25の要件。実装詳細のタイミング表現は詳細設計で定義する
```

### 3-3. 進捗管理

```
【進捗】
- 任務ごとに進捗値（例：0〜100%）を持つ
- プレイヤー行動、委任結果、イベントで進捗が増減する

【成功/失敗】
- 成功：期限内に必要進捗を達成
- 失敗：期限切れで未達
```

### 3-4. 報酬・評価

```
【功績】
- 原則：最終的な任務成功時にのみ付与する
- 任務途中の「徒士/馬上衆相当の行動」では功績を増やさない（経験値は増やしてよい）

【経験値】
- 自分の行動、委任結果で獲得
- 成長に接続

【任務失敗】
- 失敗時のペナルティは「次の任務条件/評価」の形で軽量に導入してよい
- 数値設計は詳細設計で定義
```

---

## 4. 委任（割り振り）

### 4-1. 基本概念

```
- 評定で配下にサブタスクを割り振る
- サブタスクは一定ターン経過で結果が返る
- 結果により進捗が増減し、配下の状態（疲労/負傷など）に影響が出る
```

### 4-2. 割り振り可能なサブタスク（案）

| サブタスク | 目的 | 進捗への影響 | 主なリスク |
|------------|------|--------------|------------|
| 訓練 | 戦闘効率UP | 小〜中 | 疲労 |
| 巡察 | 盗賊/事件の抑止 | 小〜中 | 疲労/負傷（低） |
| 情報収集 | 成功率UP/隠し要素解放 | 小 | 失敗（成果なし） |
| 護衛任務 | 安定収入/関係改善 | 小 | 損耗（低） |
| 盗賊討伐 | 直接的な成果 | 中〜大 | 負傷/死亡（v0.25では軽量運用） |

※上記はv0.25の要件として「最低2種類以上」実装する。全種類の実装は必須ではない。

---

## 5. 家臣団（最小要素）

### 5-1. v0.25で必要な要素

```
- 名前（表示に用いる）
- 簡単な特性（例：勇敢/慎重/堅実など。数値補正でもテキストでもよい）
- 状態（疲労/負傷など、任務/委任で変動）
```

### 5-2. v0.25で「まだやらない」こと（非スコープ）

```
- 忠誠度や人間関係の本格運用
- 雇用/借りの区分（これはv0.45で導入）
- 知行地・軍役の導入（これはv0.5）
```

---

## 6. 画面/UX（最小）

### 6-1. 必須UI

| UI | 概要 |
|----|------|
| 小頭任務パネル | 現在の任務、期限（残ターン）、進捗を表示 |
| 評定：割り振りUI | 配下とサブタスクを選び、割り振りを確定 |
| 結果ログ | 委任結果・進捗変動・損耗をログで確認 |

※画面IDの採番は v0.5 画面ID体系に合わせ、詳細設計/画面設計で確定する（v0.25要件としては必須ではない）。

---

## 7. 受け入れ条件（出口条件）

1. 小頭任務が「期限（残ターン）」と「進捗」で可視化される
2. 評定で、配下にサブタスクを割り振れる
3. 割り振ったサブタスクの結果がターン経過で返り、進捗が変動する
4. 任務が期限内に達成/未達の判定を持ち、成功/失敗がログに出る
5. 任務途中の行動で功績が増えない（最終成功時に付与）
6. 30分のプレイで「計画→実行→結果→修正」が1サイクル体験できる

---

## 8. 実装優先順位

### Phase 1（必須）

1. 小頭任務（期限/進捗/成功失敗）
2. 評定での目標提示・進捗表示
3. 委任（割り振り）と結果返却
4. 結果ログ（進捗/損耗）

### Phase 2（重要）

5. 家臣団の最小要素（名前/特性/状態）
6. 経験値/成長の接続

### Phase 3（追加）

7. サブタスク種類の追加
8. イベント演出の拡充

---

## 9. 次のステップ

1. **Version 0.25 詳細設計書の作成**
2. **評定UI/委任UIの画面設計**
3. **セーブ互換方針の確定（既存セーブの移行方法）**
4. **実装開始**

---

**Version 0.25 要件定義書（たたき台）**
