# 戦国立身出世SLG Version 0.1 動的実装プロンプト

## プロジェクト概要

戦国時代を舞台にした立身出世シミュレーションゲームのVersion 0.1を実装します。
プレイヤーは徒士（かち）から始まり、馬上衆、小頭へと出世を目指します。

**GitHubリポジトリ:** https://github.com/myakoro/new-sengoku

---

## 技術スタック

- **フレームワーク:** Electron + React + TypeScript
- **スタイリング:** TailwindCSS
- **状態管理:** Zustand または React Context
- **ビルドツール:** Vite

---

## 実装対象

### 画面一覧（UIモック完成済み）

| 画面ID | 画面名 | 優先度 |
|--------|--------|--------|
| SC-01 | タイトル画面 | 高 |
| SC-02 | キャラメイク画面 | 高 |
| SC-03 | メイン画面 | 高 |
| SC-04 | 主命選択画面 | 高 |
| SC-05 | 結果表示画面 | 高 |
| SC-06 | 月次報告画面 | 高 |
| SC-07 | 出世画面 | 中 |
| SC-08 | 盗賊討伐画面 | 高 |
| SC-10 | 戦闘結果画面 | 高 |
| SC-11 | エンディング画面 | 低 |

---

## コアシステム

### 1. プレイヤー状態

```typescript
interface PlayerState {
  name: string
  rank: "徒士" | "馬上衆" | "小頭"
  
  // 能力値（才能上限300）
  potential: {
    combat: number      // 武芸
    command: number     // 統率
    intelligence: number // 知略
    administration: number // 政務
  }
  
  // 現在値（成長で上昇）
  stats: {
    combat: number
    command: number
    intelligence: number
    administration: number
  }
  
  // 経済
  money: number         // 金（貫）
  rice: number          // 米（石）
  debt: number          // 借金
  salaryRice: number    // 扶持米（月）
  
  // 功績
  merit: number
  
  // 家臣
  juuboku: Juuboku[]    // 従僕（武芸40〜60）
  ashigaru: Ashigaru[]  // 徒士
  bashoShu: BashoShu[]  // 馬上衆
  
  // 装備
  hasHorse: boolean     // 馬
  
  // 権限
  canBuyHorse: boolean
  canCommandSquad: boolean
}
```

### 2. 時間システム

```typescript
interface GameTime {
  week: number          // 1〜156（3年間）
  year: number          // 1575〜1577
  month: number         // 1〜12
  weekOfMonth: number   // 1〜4
}

// 1ターン = 1週間
// 月次処理 = 4週ごと
// ゲーム期間 = 3年（156週）
```

### 3. 主命システム

```typescript
interface Command {
  name: string
  duration: number      // 週数
  merit: number         // 功績
  requireRank?: string  // 必要役職
  banditRank?: string   // 盗賊ランク（盗賊討伐の場合）
}

// 主命一覧
const COMMANDS = {
  "訓練": { duration: 1, merit: 5 },
  "巡察": { duration: 1, merit: 3 },
  "情報収集": { duration: 1, merit: 12 },
  "護衛任務": { duration: 1, merit: 10 },
  "盗賊討伐（小規模）": { duration: 2, merit: 15, banditRank: "S" },
  "盗賊討伐（中規模）": { duration: 4, merit: 30, banditRank: "A" },
  "盗賊討伐（大規模）": { duration: 4, merit: 40, banditRank: "B", requireRank: "馬上衆" },
  "盗賊討伐（討伐戦）": { duration: 4, merit: 60, banditRank: "C", requireRank: "馬上衆" },
  "盗賊討伐（賊軍）": { duration: 8, merit: 80, banditRank: "D" }
}
```

### 4. 盗賊システム

```typescript
interface Bandit {
  rank: "S" | "A" | "B" | "C" | "D"
  count: number
  baseCombatPower: number
  morale: number
  weakness: string | null
  traitor: boolean
  wealth: { rice: number, money: number }
}

// ランク別設定
const BANDIT_RANKS = {
  S: { count: [1, 2], combatRange: [15, 50], merit: 15, bossReward: { rice: 0.05, money: 0.025 } },
  A: { count: [3, 5], combatRange: [70, 110], merit: 30, bossReward: { rice: 0.075, money: 0.05 } },
  B: { count: [6, 10], combatRange: [150, 250], merit: 40, bossReward: { rice: 0.125, money: 0.075 } },
  C: { count: [11, 15], combatRange: [300, 450], merit: 60, bossReward: { rice: 0.25, money: 0.125 } },
  D: { count: [20, 25], baseCombat: 800, merit: 80, bossReward: { rice: 0.75, money: 0.5 } }
}
```

### 5. 戦闘力計算

```typescript
// 個人戦闘時（盗賊討伐・護衛任務）
function calculatePlayerCombatPower(player: PlayerState): number {
  let power = player.stats.combat
  
  // 従僕（100%）
  player.juuboku.forEach(j => power += j.combat)
  
  // 徒士（100%）
  player.ashigaru.forEach(a => power += a.combat)
  
  // 馬上衆（100%）
  player.bashoShu.forEach(b => power += b.combat)
  
  // 臨時足軽（戦闘力32/人）
  // mission.additionalAshigaru * 32
  
  return Math.floor(power)
}
```

### 6. 出世システム

```typescript
const PROMOTION_REQUIREMENTS = {
  徒士_to_馬上衆: { merit: 250 },
  馬上衆_to_小頭: { merit: 600 }
}

// 昇進時の変化
// - 役職変更
// - 扶持米増加（1.8石 → 3.5石 → 5.0石）
// - 権限追加
// - ステータスは変化しない
```

---

## 初期状態

```typescript
const INITIAL_PLAYER_STATE = {
  name: "新九郎",
  rank: "徒士",
  
  potential: {
    combat: 80,
    command: 70,
    intelligence: 75,
    administration: 75
  },
  
  stats: {
    combat: 52,
    command: 40,
    intelligence: 52,
    administration: 56
  },
  
  money: 20,
  rice: 0,
  debt: 0,
  salaryRice: 1.8,
  merit: 0,
  
  juuboku: [
    { combat: randomInt(40, 60) },
    { combat: randomInt(40, 60) },
    { combat: randomInt(40, 60) }
  ],
  
  ashigaru: [],
  bashoShu: [],
  hasHorse: false,
  canBuyHorse: false,
  canCommandSquad: false
}
```

---

## 実装順序（推奨）

### Phase 1: 基盤
1. プロジェクトセットアップ（Electron + React + TypeScript + Vite）
2. 状態管理（Zustand）
3. 画面遷移（React Router）
4. 共通コンポーネント

### Phase 2: 基本画面
1. SC-01 タイトル画面
2. SC-02 キャラメイク画面
3. SC-03 メイン画面
4. SC-04 主命選択画面

### Phase 3: ゲームループ
1. 週次処理
2. 月次処理
3. SC-05 結果表示画面
4. SC-06 月次報告画面

### Phase 4: 盗賊討伐
1. SC-08 盗賊討伐画面
2. 計略システム（偵察、偽情報、内応者買収、足軽雇用）
3. 戦闘判定
4. SC-10 戦闘結果画面

### Phase 5: 出世・エンディング
1. 出世判定
2. SC-07 出世画面
3. SC-11 エンディング画面

---

## 参照ドキュメント

- `詳細設計書/Version0.1_詳細設計書.md` - 全システムの詳細仕様
- `画面設計書/Version0.1_画面設計書.md` - 画面仕様
- `UIモック/` - 各画面のHTMLモック（デザイン参照用）
- `GDD及び経緯サマリー/GDD_v1.1.md` - ゲームデザインドキュメント

---

## 注意事項

1. **UIモックのスタイルを踏襲** - 色、フォント、レイアウトはモックに合わせる
2. **詳細設計書が正** - 数値や計算式は詳細設計書を参照
3. **セーブ機能は後回し** - まずはゲームループを完成させる
4. **ライバルAIはシンプルに** - 詳細設計書の行動パターンを参照

---

## 開始コマンド

```bash
git clone https://github.com/myakoro/new-sengoku.git
cd new-sengoku
# Electron + React + TypeScript + Vite のセットアップから開始
```
